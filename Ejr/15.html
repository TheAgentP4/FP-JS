<!--
    Ejercicio #15: Hacer que funcione
    Reglas de encriptación:
    1. La letra "a" se convierte en "enter"
    2. La letra "e" se convierte en "imes"
    3. La letra "i" se convierte en "ai"
    4. La letra "o" se convierte en "ober"
    5. La letra "u" se convierte en "ufat"
    Reglas de desencriptación:
    1. Las mismas reglas de encriptación pero al revés
    Tambien se tiene que verificar que el texto ingresado no tenga acentos y que solo sean letras minúsculas con una función de Javascript.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Proyecto de la clase de Fundamentos de Programación en JavaScript">
    <meta name="keywords" content="HTML, CSS, JavaScript, FP, Fundamentos de Programación, UNAM, FI, UNICA">
    <meta name="author" content="Diego Medina Ramírez">
    <title>Ejercicio #15 - Encriptador y desencriptador de texto</title>
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
    <link rel="icon" type="image/x-icon" href="../favicon.ico">
    <!-- CSS -->
    <link rel="stylesheet" href="../css/styles.css" type="text/css" media="all">
</head>
<body>
    <style>
        textarea{
            width: 100%;
            height: 100%;
            resize: none;
            border: 1pt solid black;
            border-radius: 1rem;
            padding: 1rem;
            margin: 1rem;
        }
        #resultado{
            font-size: 1.5rem;
            font-weight: bold;

        }
        #bttn-cpy{
            cursor: pointer;
        }
    </style>
    <header>
        <h1>Ejercicio 15 - Encriptador y desencriptador de texto</h1>
    </header>
    <main>
        <section>
            <h2>Descripción</h2>
            <p>Encriptador y desencriptador de texto</p>
        </section>
        <section>
            <textarea cols="40" rows="12" placeholder="Ingrese el texto aquí"></textarea>
            <p>	&#9432; Sólo letras minúsculas y sin acentos</p>
            <div>
                <button>Encriptar</button>
                <button>Desencriptar</button>
            </div>
        </section>
        <section>
            <span id="resultado">Resultado?</span>
            <div>
                <button id="bttn-cpy">Copiar</button>
            </div>
        </section>
        <p><a href="../index.html" title="Regresar al inicio">Regresar al inicio</a></p>
    </main>
    <script>
        const textarea = document.querySelector("textarea");
        const resultado = document.querySelector("#resultado");
        const img = document.querySelector("img");
        const span = document.querySelectorAll("span")[1];
        const button = document.querySelector("button");
        const button2 = document.querySelectorAll("button")[1];
        const bttnCpy = document.querySelector("#bttn-cpy");

        function verificarTexto(){
            if (textarea.value.match('[A-Z]') != null || textarea.value.match('[áéíóú]')) {
                alert("Sólo letras minúsculas y sin acentos");
                window.location.reload();
            }else if(textarea.value === "" || textarea.value === " "){
                alert("Escribe texto")
                window.location.reload();
            }
        }
        button.addEventListener("click", () => {
            let texto = textarea.value;
            verificarTexto()
            let textoEncriptado = "";
            if (textarea.value === "") {

                span.textContent = "Ingresa el texto que desees encriptar o desencriptar.";
            }else{
                for (let i = 0; i < texto.length; i++) {                 
                    
                    if (texto[i] === "a") {
                        textoEncriptado += "enter";
                    } else if (texto[i] === "e") {
                        textoEncriptado += "imes";
                    } else if (texto[i] === "i") {
                        textoEncriptado += "ai";
                    } else if (texto[i] === "o") {
                        textoEncriptado += "ober";
                    } else if (texto[i] === "u") {
                        textoEncriptado += "ufat";
                    } else {
                        textoEncriptado += texto[i];
                    }
                }
            resultado.textContent = textoEncriptado;
            span.textContent = "Texto encriptado";
        }
        });

        button2.addEventListener("click", () => {
            verificarTexto()
            let texto = textarea.value;
            let textoDesencriptado = "";
            for (let i = 0; i < texto.length; i++) {
                if (texto[i] === "e" && texto[i + 1] === "n" && texto[i + 2] === "t" && texto[i + 3] === "e" && texto[i + 4] === "r") {
                    textoDesencriptado += "a";
                    i += 4;
                } else if (texto[i] === "i" && texto[i + 1] === "m" && texto[i + 2] === "e" && texto[i + 3] === "s") {
                    textoDesencriptado += "e";
                    i += 3;
                } else if (texto[i] === "a" && texto[i + 1] === "i") {
                    textoDesencriptado += "i";
                    i += 1;
                } else if (texto[i] === "o" && texto[i + 1] === "b" && texto[i + 2] === "e" && texto[i + 3] === "r") {
                    textoDesencriptado += "o";
                    i += 3;
                } else if (texto[i] === "u" && texto[i + 1] === "f" && texto[i + 2] === "a" && texto[i + 3] === "t") {
                    textoDesencriptado += "u";
                    i += 3;
                } else {
                    textoDesencriptado += texto[i];
                }
            }
            resultado.textContent = textoDesencriptado;
            span.textContent = "Texto desencriptado";
        });

        button.addEventListener("click", () => {
            if (textarea.value === "") {

                span.textContent = "Ingresa el texto que desees encriptar o desencriptar.";
            }
        });

        button2.addEventListener("click", () => {
            if (textarea.value === "") {

                span.textContent = "Ingresa el texto que desees encriptar o desencriptar.";
            }
        });

        bttnCpy.addEventListener("click", () => {
            let texto = resultado.textContent;
            navigator.clipboard.writeText(texto);
        });
    



    </script>
</body>
</html>